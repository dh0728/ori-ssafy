# 초등학생 금융 교육 플랫폼
- 초등학생들을 대상으로 한 학급이 하나의 작은 나라가 된것을 가정하여 경제 관념을 재미있게 학습할 수 있는 플랫폼

## 개발 프레임워크
백엔드 : Spring boot
프론트엔드 : Flutter , react(관리자용)

## 주요 기능
- **사용자 역할 분리**:
    - **관리자(선생님)**: 직업 부여, 세금 설정, 학생 정보 관리
    - **학생(국민)**: 경제 활동, 세금 납부, 은행 이용, 경매 참여
    
- **직업 시스템**:
    - 학생들에게 직업을 부여하고 월급 지급
    - 인원은 선생님이 설정 가능
    - 무직자도 있음
    - 무조건 있어야 하는 직업
        - 대통령 ( 선생님 )
        - 은행원
        - 국세청장
        - 국무총리1,2,3 (반장, 부반장) ?? 고민 /매달 뽑는거/ 민주주의 투표 보류 / 법 제안 ( 학급 회의 ) (보류)
        - 통계청
        - 그외 O,X로 해결되는 직업들
    
    일치(한민,경원,동현)/ 노 일치(지연, 경록, 수민)
    

- **알바 시스템(리워드 시스템)**:
    - 특정 미션 수행 시 보상 지급(예: 특수한 상황)
    
- **세금 및 경제 시스템**:
    - 학생들의 월급에서 세금 차감(국세청)
    - 세금으로 공공재(예: 교실 자원) 구매
    
- **은행 및 화폐 시스템**:
    - 가상의 은행에서 돈 입출금, 예금 기능, 적금(단리 만 됨, 복리 머리아픔)
    - 학생들이 경제 활동을 할 수 있도록 통화(화폐) 생성
    
- **법률 제정 기능:**
    - 교사가 법을 제정하면 학생들이 이를 지키도록 하고, 위반 시 벌금을 부과
    - **관리자(선생님)**: 직업 부여, 세금 설정, 학생 정보 관리
    - **학생(국민)**: 경제 활동, 세금 납부, 은행 이용, 경매 참여
    
- **자리를 활용한 부동산**
    - 일단 MVP는 달에 한번씩 투자
    
- **시장 및 경매 시스템**
    - 학생들이 가상의 상품을 사고팔 수 있는 시장
    - 특정 아이템(예: 특별한 자리, 간식 쿠폰) 경매 기능
    
- **주식 투자**
    - 주(일) 단위로 선생님이 투자 목록에 관한 업데이트 진행
    - 선생님이 설정한 투자 목록에 애기들이 알아서 투자
    - 애기들은 자기 판단하에 사고/팔기 가능


## 내가 하고싶은 추가기능
나는 관리자 페이지에 이 앱을 사용하는 모든 선생님들이 단체 채팅방을 만들어서 소통할 수 있는 기능을 구현하고 싶어. 어떻게 구현할 수 있을까?

### 있으면 좋은점
1. 관리자 간 실시간 소통으로 운영 효율성 증가
    - 현재 각 학교의 선생님들이 서비스 이용 중 여러 문제나 고민 사항이 생길 수 있는데, 이런 문제를 서로 공유할 수 있는 공식적인 소통 채널이 있다면 실시간으로 운영 노하우를 공유하고 문제 해결 속도를 높일 수 있음

2. 운영 노하우 및 성공 사례 공우
    - 관리자 채팅방을 통해 전국의 선생님들이 경험을 공유하면서, 더 좋은 교육 모델을 만들어갈 수 있음.

3. 선생님들의 사용자 피드백을 실시간으로 수집 가능
    - 관리자 채팅방에서 실시간으로 개선 의견을 수집하여, 서비스 품질을 빠르게 향상할 수 있음.

**결과적으로 학교 간 협업 & 커뮤니티 형성 → 서비스의 확장성과 유지율 증가**

### 📌 구현 방식

1️⃣ 주요 기능
- 관리자(선생님) 전용 단체 채팅방
- 실시간 채팅(WebSocket + STOMP) 지원
- 과거 대화 내용 저장 (HBase 또는 MongoDB)
- 푸시 알림 (FCM) 지원 가능
- 읽음 확인 & 알림 기능 (Kafka 활용)

2️⃣ 필요한 기술 스택
- 실시간 메시징 : STOMP + WebSocket
- 비동기 메시지 처리 : Kafka
- 데이터 저장 : HBase, Postgre, MongoDB (NoSQL이면 모든 가능 완전 가능)
- 푸시 알림 : Firebase Cloud Messageing(FCM)

### STOMP를 이용했을 때 발생하는 행동
- 채팅방 입장 : 현재 입장한 채팅방의 번호를 구독한다.
- 채팅방에서 메시지를 보내거나 받기 : 구독한 채팅방에서 메시지를 보내거나 받아볼 수 있다.

#### 장점
- 채팅 엔드포인트를 Spring Security를 이용하여 권한을 제어할 수 있다.
- Publisher으로 부터 전달 받은 메시지를 Subscriber로 전달해줄 때 중간에서 메시지를 주고 받게 해주는 메시지 브로커를 사용할 수 있다.

Stomp를 사용하면 기본적으로 **In-Memory Message Broker를 사용**하게 되는데, 이로인해 생기는 여러가지 문제가 있다. 
- 이 부분은 RabbitMQ, Kafka, Active MQ와 같은 외부 브로커를 사용함으로서 문제를 해결할 수 있음

### Message Broker란? 
- 발신자(Publisher)와 수신자(Subscriber) 사이에서 메시지를 중계하는 시스템이야.(like 우체국)
- **publisher가 생산한 메시지를 메시지 큐에 저장**하고, 저장된 데이터를 consumer가 소비할 수 있도록 **중간 다리 역할**을 해줍니다.

#### 📌 기능
- 메시지를 한 곳에서 받아서, 적절한 대상에게 전달
- 서로 다른 애플리케이션 간 메시지 전달
- 메시지를 저장하고 장애가 발생해도 손실 없이 유지
- 비동기 통신을 지원하여 시스템 부하를 줄임

#### 📌대표적인 메시지 브로커
- Kafka: 대용량 데이터를 분산 처리 & 로그 저장 가능
- RabbitMQ: 메시지 큐 기반, 빠른 메시지 전달 & 다양한 패턴 지원
- ActiveMQ: 자바 기반의 신뢰성 높은 메시지 브로커
- Redis Pub/Sub: 캐싱과 함께 간단한 메시지 브로커 기능 제공

### In-Memory Message Broker란?
- 메시지를 RAM(메모리)에 저장하고 전달하는 방식
- STOMP는 메시지를 메모리에 저장하고, 같은 서버 내에서만 전달

#### In-Memory Message Broker를 사용했을 때 문제
1. 서버 간 메시지 공유 불가능 
    - In-Memory 방식은 **한 대의 서버에서만 동작**하기 때문에, 여러 대의 서버(스케일 아웃)에서 메시지를 공유할 수 없음.
    - 만약 A 서버에서 메시지를 보냈는데, B 서버에 연결된 사용자는 이 메시지를 못 받는 문제 발생.
2. 서버가 재시작되면 메시지가 유실됨 - **메시지 저장 기능이 없기 때문**
    - In-Memory 방식은 메모리에 메시지를 저장하므로 서버가 재시작되면 모든 메시지가 사라짐.
    - 만약 사용자가 메시지를 보낸 후 서버가 재시작되면 이 메시지를 다시 받을 수 없음.
3. 대량 트래픽 처리 불가능
    - In-Memory 방식은 메시지를 메모리에서만 처리하므로, 사용자가 많아질수록(채팅방 참가자 증가) 메모리 부담이 커짐.
    - 한계를 넘어서면 서버가 멈추거나 강제 종료될 위험이 있음.

외부 메시지 브로커를 사용하면(Kafka, RabbitMQ) 해결 가능
- 여러 서버에서 메시지 공유 가능
- 메시지 유실 X - 저장 가능 (디스크, 로그 유지)
- 여러 서버에 분산하여 처리

### 결과적으로 STOMP를 사용해야 하는 이유는?
- 채팅방을 직접 관리하지 않아도 됨 → 자동으로 채팅방의 모든 사용자에게 메시지 전송 가능
    - 채팅방마다 세션을 관리해야 하는 번거로움 해소!!
- **메시지 라우팅(전송 경로 관리)** 기능 제공
- **메시지 형식이 정해져 있어서 표준화된 방식으로 개발 가능**


### 도움받은 자료
- <a href="https://velog.io/@ch4570/Stomp-Kafka%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%B1%84%ED%8C%85-%EA%B8%B0%EB%8A%A5-%EA%B0%9C%EB%B0%9C%ED%95%98%EA%B8%B0-with-Spring-Boot-1-Kafka%EC%99%80-Stomp%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C">Stomp + Kafka를 이용한 채팅 기능 개발하기 - (with Spring Boot) #1 (Kafka와 Stomp는 무엇일까?)</a>

